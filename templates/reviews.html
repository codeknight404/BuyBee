{% extends "base.html" %}
{% block content %}
<div class="max-w-2xl mx-auto mt-10 p-6 bg-white/30 backdrop-blur-md rounded-xl">
  <h2 class="text-2xl font-bold text-green-700 mb-6">⭐ Reviews</h2>
  <form id="review-form" method="POST" class="space-y-4 mb-6">
    <input type="text" name="name" placeholder="Your Name" required
      class="w-full px-4 py-2 rounded-lg focus:ring-2 focus:ring-green-500" />
    <input type="number" name="rating" min="1" max="5" placeholder="Rating (1-5)" required
      class="w-full px-4 py-2 rounded-lg focus:ring-2 focus:ring-green-500" />
    <textarea name="comment" placeholder="Your Review" required
      class="w-full px-4 py-2 rounded-lg focus:ring-2 focus:ring-green-500"></textarea>
    <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition">Submit
      Review</button>
  </form>
  <div id="reviews-list">
    {% for r in reviews %}
    <div class="mb-4 p-4 bg-white/20 backdrop-blur-sm rounded-lg shadow">
      <p class="font-semibold text-gray-800">{{ r.name }} - ⭐{{ r.rating }}</p>
      <p class="text-gray-700">{{ r.comment }}</p>
    </div>
    {% else %}
    <p class="text-gray-500">No reviews yet. Be the first to review!</p>
    {% endfor %}
  </div>
  <script>
    document.getElementById('review-form').addEventListener('submit', function (e) {
      e.preventDefault();
      const formData = new FormData(this);
      fetch('', { method: 'POST', body: formData })
        .then(res => res.text())
        .then(html => {
          location.reload();
        });
    });
  </script>
</div>
{% endblock %}